<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="style.css">
        <meta charset="utf-8">
        <title>chpoker</title>
    </head>
    <body>
    <script language="javascript">
        const sfxChpok = new Audio("./sfx/pop.mp3");

        var chpoks = 0;
        var mode   = 0;

        const mode_zen  = 0;
        const mode_idle = 1;
        

        setInterval(auto_chpoker, 1000);

        function auto_chpoker() {
            if (mode == 1) {
                changeImage();
            }
        }

        function switch_mode() {
            if (mode == mode_zen) {
                mode = mode_idle;
            } else {
                mode = mode_zen;
            }
        }

        function set_mode(new_mode) {
            mode = new_mode;
        }

        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        function changeImage() {
            sfxChpok.play();

            document.getElementById("imgClickAndChange").src = "./img/1.png";
            setTimeout(() => { document.getElementById("imgClickAndChange").src = "./img/0.png"; }, 100);

            
            document.getElementById("score").innerHTML = chpoks++;
        }
    </script>

    <div class="header">
        <div class="version">chpoker v0.0.7</div>
        <div class="menu">
            <button type="button" onclick="set_mode(mode_zen)">Zen mode</button>
            <button type="button" onclick="set_mode(mode_idle)">Idle mode</button>
        </div>
    </div>

    <div>
        <img alt="chpoker" class="chpoker" src="./img/0.png" id="imgClickAndChange" onclick="changeImage()"/>
    </div>

    <div class="score-table">
        number of chpoks: <span id="score" class="score">0</span>
    </div>

    </body>
</html>
